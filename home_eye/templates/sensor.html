(% extends 'base.html' %)

(% block title %) Welcome! (% endblock %)

(% block content %)

<div class="">  
    <div class="container">
        <h1>(( sensor['name'] ))</h1>

        <div class="row">
            <div class="col dashboard_value">
                <p><i class="fas fa-thermometer-half"></i> (( sensor['temperature'] )) &deg;C</p>
            </div>
            <div class="col dashboard_value">
                <i class="fas fa-tint"></i> (( sensor['humidity'] )) %
            </div>
             
        </div>
        <div class="row">
            <div class="col-sm-12">
                Uppm√§ttes (( sensor['timestamp'] ))
            </div>
        </div> 
    </div>
</div>

<canvas id="hoursChart"></canvas>
<br/><br/>
<canvas id="daysChart"></canvas>

<script>
function get_options(title) {
  var options = {
      title: {
        display: true,
        text: title
      },
      aspectRatio: 1,
      scales: {
        xAxes: [{
          ticks: {
            autoSkip: true,
            maxRotation: 90,
            minRotation: 90
          }
        }]
      }
    };
  return options;  
}

var ctx = document.getElementById('hoursChart').getContext('2d');
var options_hours = get_options('Last 24h trend');
var labels = (( labels|safe ));
var myLineChart = new Chart(ctx, {
  type: 'line',
  data: {
    labels: (( labels|safe )),
    datasets: [{ 
        data: (( humidity|safe )),
        label: "Humidity",
        borderColor: "#3e95cd",
        fill: false
      },{ 
        data: (( temperature|safe )),
        label: "Temperature",
        borderColor: "#c45850",
        fill: false
      }
    ]
  },
  options: options_hours
});


var ctx = document.getElementById('daysChart').getContext('2d');
var options_days = get_options('Last 30 days trend');
var labels = [ 
  (% for sensor in daily_trend %)
    "(( sensor['timestamp'] ))",
  (% endfor %)
];
var humidity = [ 
  (% for sensor in daily_trend %)
    (( sensor['humidity'] )),
  (% endfor %)
];
var temperature = [ 
  (% for sensor in daily_trend %)
    (( sensor['temperature'] )),
  (% endfor %)
];

var myLineChart = new Chart(ctx, {
  type: 'line',
  data: {
    labels: labels,
    datasets: [{ 
        data: humidity,
        label: "Humidity",
        borderColor: "#3e95cd",
        fill: false
      },{ 
        data: temperature,
        label: "Temperature",
        borderColor: "#c45850",
        fill: false
      }
    ]
  },
  options: options_days
});

</script>

(% endblock %)